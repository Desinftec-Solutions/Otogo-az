{"ast":null,"code":"// API Base URL configuration\n// In development, we use the proxy configured in setupProxy.js (relative path)\n// In production, we use the full URL\nconst API_BASE_URL = 'http://194.163.173.179:3300';\nconsole.log('API Configuration:', {\n  API_BASE_URL,\n  env: process.env.NODE_ENV\n});\nconst defaultHeaders = {\n  'Content-Type': 'application/json'\n};\nconst handleResponse = async response => {\n  const data = await response.json().catch(() => ({}));\n  if (!response.ok) {\n    const errorMessage = (data === null || data === void 0 ? void 0 : data.message) || (data === null || data === void 0 ? void 0 : data.detail) || 'Unable to submit your request. Please try again.';\n    const error = new Error(errorMessage);\n    error.status = response.status;\n    throw error;\n  }\n  return data;\n};\nexport const submitBusinessInquiry = async payload => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/businesses`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: defaultHeaders,\n      body: JSON.stringify(payload)\n    });\n    return handleResponse(response);\n  } catch (error) {\n    // Enhanced error handling for \"Failed to fetch\" errors\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      // Network error or CORS issue\n      const detailedError = new Error(`Network error: Unable to connect to ${API_BASE_URL}. ` + `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). ` + `Check browser console for more details.`);\n      detailedError.isNetworkError = true;\n      throw detailedError;\n    }\n    throw error;\n  }\n};\nexport const submitSupportInquiry = async payload => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/contact`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: defaultHeaders,\n      body: JSON.stringify(payload)\n    });\n    return handleResponse(response);\n  } catch (error) {\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      const detailedError = new Error(`Network error: Unable to connect to ${API_BASE_URL}. ` + `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).`);\n      detailedError.isNetworkError = true;\n      throw detailedError;\n    }\n    throw error;\n  }\n};\nexport const checkApiHealth = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/health`, {\n      method: 'GET',\n      mode: 'cors'\n    });\n    return handleResponse(response);\n  } catch (error) {\n    // Enhanced error handling for health check\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      const detailedError = new Error(`Cannot reach API server at ${API_BASE_URL}. ` + `Check: 1) Server is running, 2) Correct IP:port, 3) Network/firewall access, 4) Mixed content (HTTPS→HTTP blocked)`);\n      detailedError.isNetworkError = true;\n      throw detailedError;\n    }\n    throw error;\n  }\n};","map":{"version":3,"names":["API_BASE_URL","console","log","env","process","NODE_ENV","defaultHeaders","handleResponse","response","data","json","catch","ok","errorMessage","message","detail","error","Error","status","submitBusinessInquiry","payload","fetch","method","mode","headers","body","JSON","stringify","name","includes","detailedError","isNetworkError","submitSupportInquiry","checkApiHealth"],"sources":["C:/Dev/Projects/Otogo/frontend/src/services/api.js"],"sourcesContent":["// API Base URL configuration\r\n// In development, we use the proxy configured in setupProxy.js (relative path)\r\n// In production, we use the full URL\r\nconst API_BASE_URL = 'http://194.163.173.179:3300';\r\n\r\nconsole.log('API Configuration:', { API_BASE_URL, env: process.env.NODE_ENV });\r\n\r\nconst defaultHeaders = {\r\n  'Content-Type': 'application/json',\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  const data = await response.json().catch(() => ({}));\r\n\r\n  if (!response.ok) {\r\n    const errorMessage = data?.message || data?.detail || 'Unable to submit your request. Please try again.';\r\n    const error = new Error(errorMessage);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nexport const submitBusinessInquiry = async (payload) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/businesses`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    // Enhanced error handling for \"Failed to fetch\" errors\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      // Network error or CORS issue\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). ` +\r\n        `Check browser console for more details.`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const submitSupportInquiry = async (payload) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/contact`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const checkApiHealth = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/health`, {\r\n      method: 'GET',\r\n      mode: 'cors',\r\n    });\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    // Enhanced error handling for health check\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      const detailedError = new Error(\r\n        `Cannot reach API server at ${API_BASE_URL}. ` +\r\n        `Check: 1) Server is running, 2) Correct IP:port, 3) Network/firewall access, 4) Mixed content (HTTPS→HTTP blocked)`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}