{"ast":null,"code":"// API Base URL configuration\n// In development, we use the proxy configured in setupProxy.js (relative path)\n// In production, we use the full URL\nconst API_BASE_URL='https://api.otogo.az';console.log('API Configuration:',{API_BASE_URL,env:process.env.NODE_ENV});const defaultHeaders={'Content-Type':'application/json'};const handleResponse=async response=>{const data=await response.json().catch(()=>({}));if(!response.ok){const errorMessage=(data===null||data===void 0?void 0:data.message)||(data===null||data===void 0?void 0:data.detail)||'Unable to submit your request. Please try again.';const error=new Error(errorMessage);error.status=response.status;throw error;}return data;};export const submitBusinessInquiry=async payload=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/businesses\"),{method:'POST',mode:'cors',headers:defaultHeaders,body:JSON.stringify(payload)});return handleResponse(response);}catch(error){// Enhanced error handling for \"Failed to fetch\" errors\nif(error.name==='TypeError'&&error.message.includes('fetch')){// Network error or CORS issue\nconst detailedError=new Error(\"Network error: Unable to connect to \".concat(API_BASE_URL,\". \")+\"Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). \"+\"Check browser console for more details.\");detailedError.isNetworkError=true;throw detailedError;}throw error;}};export const submitSupportInquiry=async payload=>{try{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/contacts\"),{method:'POST',mode:'cors',headers:defaultHeaders,body:JSON.stringify(payload)});return handleResponse(response);}catch(error){if(error.name==='TypeError'&&error.message.includes('fetch')){const detailedError=new Error(\"Network error: Unable to connect to \".concat(API_BASE_URL,\". \")+\"Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).\");detailedError.isNetworkError=true;throw detailedError;}throw error;}};","map":{"version":3,"names":["API_BASE_URL","console","log","env","process","NODE_ENV","defaultHeaders","handleResponse","response","data","json","catch","ok","errorMessage","message","detail","error","Error","status","submitBusinessInquiry","payload","fetch","concat","method","mode","headers","body","JSON","stringify","name","includes","detailedError","isNetworkError","submitSupportInquiry"],"sources":["C:/Dev/Projects/Otogo/frontend/src/services/api.js"],"sourcesContent":["// API Base URL configuration\r\n// In development, we use the proxy configured in setupProxy.js (relative path)\r\n// In production, we use the full URL\r\nconst API_BASE_URL = 'https://api.otogo.az';\r\n\r\nconsole.log('API Configuration:', { API_BASE_URL, env: process.env.NODE_ENV });\r\n\r\nconst defaultHeaders = {\r\n  'Content-Type': 'application/json',\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  const data = await response.json().catch(() => ({}));\r\n\r\n  if (!response.ok) {\r\n    const errorMessage = data?.message || data?.detail || 'Unable to submit your request. Please try again.';\r\n    const error = new Error(errorMessage);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nexport const submitBusinessInquiry = async (payload) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/businesses`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    // Enhanced error handling for \"Failed to fetch\" errors\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      // Network error or CORS issue\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). ` +\r\n        `Check browser console for more details.`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const submitSupportInquiry = async (payload) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/contacts`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA,KAAM,CAAAA,YAAY,CAAG,sBAAsB,CAE3CC,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAE,CAAEF,YAAY,CAAEG,GAAG,CAAEC,OAAO,CAACD,GAAG,CAACE,QAAS,CAAC,CAAC,CAE9E,KAAM,CAAAC,cAAc,CAAG,CACrB,cAAc,CAAE,kBAClB,CAAC,CAED,KAAM,CAAAC,cAAc,CAAG,KAAO,CAAAC,QAAQ,EAAK,CACzC,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CAEpD,GAAI,CAACH,QAAQ,CAACI,EAAE,CAAE,CAChB,KAAM,CAAAC,YAAY,CAAG,CAAAJ,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEK,OAAO,IAAIL,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,MAAM,GAAI,kDAAkD,CACxG,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,KAAK,CAACJ,YAAY,CAAC,CACrCG,KAAK,CAACE,MAAM,CAAGV,QAAQ,CAACU,MAAM,CAC9B,KAAM,CAAAF,KAAK,CACb,CAEA,MAAO,CAAAP,IAAI,CACb,CAAC,CAED,MAAO,MAAM,CAAAU,qBAAqB,CAAG,KAAO,CAAAC,OAAO,EAAK,CACtD,GAAI,CACF,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAa,KAAK,IAAAC,MAAA,CAAItB,YAAY,oBAAmB,CAC7DuB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,OAAO,CAAEnB,cAAc,CACvBoB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,OAAO,CAC9B,CAAC,CAAC,CAEF,MAAO,CAAAb,cAAc,CAACC,QAAQ,CAAC,CACjC,CAAE,MAAOQ,KAAK,CAAE,CACd;AACA,GAAIA,KAAK,CAACa,IAAI,GAAK,WAAW,EAAIb,KAAK,CAACF,OAAO,CAACgB,QAAQ,CAAC,OAAO,CAAC,CAAE,CACjE;AACA,KAAM,CAAAC,aAAa,CAAG,GAAI,CAAAd,KAAK,CAC7B,uCAAAK,MAAA,CAAuCtB,YAAY,+GACqD,0CAE1G,CAAC,CACD+B,aAAa,CAACC,cAAc,CAAG,IAAI,CACnC,KAAM,CAAAD,aAAa,CACrB,CACA,KAAM,CAAAf,KAAK,CACb,CACF,CAAC,CAED,MAAO,MAAM,CAAAiB,oBAAoB,CAAG,KAAO,CAAAb,OAAO,EAAK,CACrD,GAAI,CACF,KAAM,CAAAZ,QAAQ,CAAG,KAAM,CAAAa,KAAK,IAAAC,MAAA,CAAItB,YAAY,kBAAiB,CAC3DuB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAE,MAAM,CACZC,OAAO,CAAEnB,cAAc,CACvBoB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,OAAO,CAC9B,CAAC,CAAC,CAEF,MAAO,CAAAb,cAAc,CAACC,QAAQ,CAAC,CACjC,CAAE,MAAOQ,KAAK,CAAE,CACd,GAAIA,KAAK,CAACa,IAAI,GAAK,WAAW,EAAIb,KAAK,CAACF,OAAO,CAACgB,QAAQ,CAAC,OAAO,CAAC,CAAE,CACjE,KAAM,CAAAC,aAAa,CAAG,GAAI,CAAAd,KAAK,CAC7B,uCAAAK,MAAA,CAAuCtB,YAAY,8GAErD,CAAC,CACD+B,aAAa,CAACC,cAAc,CAAG,IAAI,CACnC,KAAM,CAAAD,aAAa,CACrB,CACA,KAAM,CAAAf,KAAK,CACb,CACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}