{"ast":null,"code":"// API Base URL configuration\n// In development, we use the proxy configured in setupProxy.js (relative path)\n// In production, we use the full URL\nconst API_BASE_URL = 'https://newapi.otogo.az';\nconsole.log('API Configuration:', {\n  API_BASE_URL,\n  env: process.env.NODE_ENV\n});\nconst defaultHeaders = {\n  'Content-Type': 'application/json'\n};\nconst handleResponse = async response => {\n  const data = await response.json().catch(() => ({}));\n  if (!response.ok) {\n    const errorMessage = (data === null || data === void 0 ? void 0 : data.message) || (data === null || data === void 0 ? void 0 : data.detail) || 'Unable to submit your request. Please try again.';\n    const error = new Error(errorMessage);\n    error.status = response.status;\n    throw error;\n  }\n  return data;\n};\nexport const submitBusinessInquiry = async (payload, lang = 'az') => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/business-companies?lang=${lang}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: defaultHeaders,\n      body: JSON.stringify(payload)\n    });\n    return handleResponse(response);\n  } catch (error) {\n    // Enhanced error handling for \"Failed to fetch\" errors\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      // Network error or CORS issue\n      const detailedError = new Error(`Network error: Unable to connect to ${API_BASE_URL}. ` + `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). ` + `Check browser console for more details.`);\n      detailedError.isNetworkError = true;\n      throw detailedError;\n    }\n    throw error;\n  }\n};\nexport const submitSupportInquiry = async payload => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/contacts`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: defaultHeaders,\n      body: JSON.stringify(payload)\n    });\n    return handleResponse(response);\n  } catch (error) {\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\n      const detailedError = new Error(`Network error: Unable to connect to ${API_BASE_URL}. ` + `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).`);\n      detailedError.isNetworkError = true;\n      throw detailedError;\n    }\n    throw error;\n  }\n};","map":{"version":3,"names":["API_BASE_URL","console","log","env","process","NODE_ENV","defaultHeaders","handleResponse","response","data","json","catch","ok","errorMessage","message","detail","error","Error","status","submitBusinessInquiry","payload","lang","fetch","method","mode","headers","body","JSON","stringify","name","includes","detailedError","isNetworkError","submitSupportInquiry"],"sources":["C:/Users/aliye/Desktop/otogo_landing/Otogo/frontend/src/services/api.js"],"sourcesContent":["// API Base URL configuration\r\n// In development, we use the proxy configured in setupProxy.js (relative path)\r\n// In production, we use the full URL\r\nconst API_BASE_URL = 'https://newapi.otogo.az';\r\n\r\nconsole.log('API Configuration:', { API_BASE_URL, env: process.env.NODE_ENV });\r\n\r\nconst defaultHeaders = {\r\n  'Content-Type': 'application/json',\r\n};\r\n\r\nconst handleResponse = async (response) => {\r\n  const data = await response.json().catch(() => ({}));\r\n\r\n  if (!response.ok) {\r\n    const errorMessage = data?.message || data?.detail || 'Unable to submit your request. Please try again.';\r\n    const error = new Error(errorMessage);\r\n    error.status = response.status;\r\n    throw error;\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nexport const submitBusinessInquiry = async (payload, lang = 'az') => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/business-companies?lang=${lang}`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    // Enhanced error handling for \"Failed to fetch\" errors\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      // Network error or CORS issue\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API). ` +\r\n        `Check browser console for more details.`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const submitSupportInquiry = async (payload) => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/api/contacts`, {\r\n      method: 'POST',\r\n      mode: 'cors',\r\n      headers: defaultHeaders,\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n      const detailedError = new Error(\r\n        `Network error: Unable to connect to ${API_BASE_URL}. ` +\r\n        `Possible causes: Server is down, CORS issue, or mixed content (HTTPS page trying to access HTTP API).`\r\n      );\r\n      detailedError.isNetworkError = true;\r\n      throw detailedError;\r\n    }\r\n    throw error;\r\n  }\r\n};\r\n\r\n"],"mappings":"AAAA;AACA;AACA;AACA,MAAMA,YAAY,GAAG,yBAAyB;AAE9CC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;EAAEF,YAAY;EAAEG,GAAG,EAAEC,OAAO,CAACD,GAAG,CAACE;AAAS,CAAC,CAAC;AAE9E,MAAMC,cAAc,GAAG;EACrB,cAAc,EAAE;AAClB,CAAC;AAED,MAAMC,cAAc,GAAG,MAAOC,QAAQ,IAAK;EACzC,MAAMC,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EAEpD,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAMC,YAAY,GAAG,CAAAJ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,OAAO,MAAIL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEM,MAAM,KAAI,kDAAkD;IACxG,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACJ,YAAY,CAAC;IACrCG,KAAK,CAACE,MAAM,GAAGV,QAAQ,CAACU,MAAM;IAC9B,MAAMF,KAAK;EACb;EAEA,OAAOP,IAAI;AACb,CAAC;AAED,OAAO,MAAMU,qBAAqB,GAAG,MAAAA,CAAOC,OAAO,EAAEC,IAAI,GAAG,IAAI,KAAK;EACnE,IAAI;IACF,MAAMb,QAAQ,GAAG,MAAMc,KAAK,CAAC,GAAGtB,YAAY,gCAAgCqB,IAAI,EAAE,EAAE;MAClFE,MAAM,EAAE,MAAM;MACdC,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEnB,cAAc;MACvBoB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,OAAO;IAC9B,CAAC,CAAC;IAEF,OAAOb,cAAc,CAACC,QAAQ,CAAC;EACjC,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACd;IACA,IAAIA,KAAK,CAACa,IAAI,KAAK,WAAW,IAAIb,KAAK,CAACF,OAAO,CAACgB,QAAQ,CAAC,OAAO,CAAC,EAAE;MACjE;MACA,MAAMC,aAAa,GAAG,IAAId,KAAK,CAC7B,uCAAuCjB,YAAY,IAAI,GACvD,wGAAwG,GACxG,yCACF,CAAC;MACD+B,aAAa,CAACC,cAAc,GAAG,IAAI;MACnC,MAAMD,aAAa;IACrB;IACA,MAAMf,KAAK;EACb;AACF,CAAC;AAED,OAAO,MAAMiB,oBAAoB,GAAG,MAAOb,OAAO,IAAK;EACrD,IAAI;IACF,MAAMZ,QAAQ,GAAG,MAAMc,KAAK,CAAC,GAAGtB,YAAY,eAAe,EAAE;MAC3DuB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAE,MAAM;MACZC,OAAO,EAAEnB,cAAc;MACvBoB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACR,OAAO;IAC9B,CAAC,CAAC;IAEF,OAAOb,cAAc,CAACC,QAAQ,CAAC;EACjC,CAAC,CAAC,OAAOQ,KAAK,EAAE;IACd,IAAIA,KAAK,CAACa,IAAI,KAAK,WAAW,IAAIb,KAAK,CAACF,OAAO,CAACgB,QAAQ,CAAC,OAAO,CAAC,EAAE;MACjE,MAAMC,aAAa,GAAG,IAAId,KAAK,CAC7B,uCAAuCjB,YAAY,IAAI,GACvD,uGACF,CAAC;MACD+B,aAAa,CAACC,cAAc,GAAG,IAAI;MACnC,MAAMD,aAAa;IACrB;IACA,MAAMf,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}